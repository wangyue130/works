M.define("Imglazyload",function(a){var b=function(c){};M.object.merge(b.prototype,{lazyLad:function(){var f=this;var k=$(window).height();var j=$("img[imgsrc]");var h=$(window).scrollTop();for(var e=0,c=j.size();e<c;e++){currentObj=$(j[e]);var g=currentObj.offset().top-k-200;if(parseInt(h)>=parseInt(g)){currentObj.attr("src",currentObj.attr("imgsrc"));currentObj.removeAttr("imgsrc")}}},getY:function(e){var c=e.css("transform");if(!c){c=e.css("-webkit-transform")}if(c=="none"){c=0}else{c=c.replace("translateY(","").replace(")","");c=parseFloat(c,10)}if(!c){c=0}return c}});a.clazz=b});M.define("index",function(a){var b=function(c){this.init(c)};M.object.merge(b.prototype,{init:function(f){this.threadTime=500;this.thread=new (M.exports("thread").clazz)({time:this.threadTime});this.sliderTouchXY={};this.sliderTime=0;this.sliderImgIndex=1;this.themeIdList=[];this.themeImgTimer={};this.imgHigth={all:0,brand:{},discount:{}};if(M.object.isObject(f)){this.sliderInit(f);this.themeImgInit(f);this.seckillInit(f);this.fireworksInit(f.fireworks);this.floatLayerInit(f.indexFloatLayer);this.recommendInit(f.recommend);this.hasAppBanner=f&&f.appBanner?f.appBanner.isOpen:false;this.appBannerType=f&&f.appBanner?f.appBanner.indexClientType:0;this.url=f&&f.url?f.url:"";this.appBannerID=this.pseudouuid();this.openapp=this.pseudouuid();this.openweb=this.pseudouuid()}this.computeImgHigth();var c="";var e=f.searchland.searchBoxWord;if(e!=null&&e!=""){e=JSON.parse(e)}if(e&&e.code!="-1"){c=e}this.searchLand=new (M.exports("searchland").clazz)({showFuncObj:{source:this,func:function(){this.indexBodyheight=$("body").height();$("body").css("height","auto");$("#"+this.fireworksleafId).remove();var h=$("#"+this.appBannerID+"");if(h&&h.height()>0){var j=$("#fixedtop");var l=$("#topheader");var g=j.children("div");for(var k=0;k<g.length;k++){if(!$(g[k]).attr("search_land_searchTransformation_show")){$(g[k]).css("display","none")}}l.css("display","none")}}},hideFuncObj:{source:this,func:function(){$("#index_clear_keyword").hide();$("body").css("height",this.indexBodyheight);var h=$("#"+this.appBannerID+"");var j=$("#fixedtop");j.css("display","none");var g=j.children("div");for(var k=0;k<g.length;k++){if(!$(g[k]).attr("search_land_searchTransformation_show")){$(g[k]).css("display","block")}}setTimeout(function(){var i={display:"block"};j.css(i)},200);if(h.height()>0){var l=$("#topheader");l.css("display","block")}if(this.touchhandler){}else{window.scrollTo(0,this.indexloc)}}},claerKeywordBtnId:"index_clear_keyword",searchPanelId:"index_search_head",keyword:c,renderId:$(document.body),landSearchWordHide:true,hotKeyword:f.searchland.hotKeyword?f.searchland.hotKeyword:null,submitId:"index_search_submit",formId:"index_searchForm",catelogyListId:"index_category",keywordId:"index_newkeyword",isHome:true,closeSearchLandBtnId:"index_search_bar_cancel"});this.imgLazyLad=new (M.exports("Imglazyload").clazz)();this.runtopId="indexToTop"},uuid:function(h){var e=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"];var c=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"];var k=this.random(3,13);var j=[];j.push(e[this.random(e.length)]);for(var g=1,f=k-1;g<f;g++){if(g%2==0){j.push(this.random(100))}else{j.push(c[this.random(26)])}}if(k>0&&k<3){j.push(e[this.random(e.length)])}else{if(k>=3&&k<8){j.push(c[this.random(26)])}else{j.push(this.random(100))}}return j.join("")},pseudouuid:function(h){var e=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"];var c=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"];var k=7;var j=[];j.push(e[this.random(e.length)]);for(var g=1,f=k-1;g<f;g++){if(g%2==0){j.push(this.random(10))}else{j.push(c[this.random(26)])}}j.push(this.random(10));return j.join("")},random:function(c,e){if(!!!e){e=0}return Math.floor(e+Math.random()*(c-e))},computeImgHigth:function(){var c=this;var e=setInterval(function(){var l=$(".brand-floor");var k=$(".discount-floor");var j=l.length+k.length;if(c.imgHigth.all<j&&j>0){if(l.length>0){for(var h=0;h<l.length;h++){if(!c.imgHigth.brand[h]&&$(l[h]).find(".brand").children().length==3){if($(l[h]).find("img").eq(0)[0].complete&&$(l[h]).find("img").eq(2)[0].complete){c.imgHigth.brand[h]=true;c.imgHigth.all++;var g=$(l[h]).find("img").eq(0).height();var f=$(l[h]).find("img").eq(2).height();if(g>0&&f>0){$(l[h]).find("img").eq(1).attr("height",(g+f+1)+"px")}}}}}if(k.length>0){for(var h=0;h<k.length;h++){if(!c.imgHigth.discount[h]&&$(k[h]).find(".discount").children().length==3){if($(k[h]).find("img").eq(1)[0].complete&&$(k[h]).find("img").eq(2)[0].complete){c.imgHigth.discount[h]=true;c.imgHigth.all++;var g=$(k[h]).find("img").eq(1).height();var f=$(k[h]).find("img").eq(2).height();if(g>0&&f>0){$(k[h]).find("img").eq(0).attr("height",(g+f+1)+"px")}}}}}}else{clearInterval(e)}},1000)},computeHigthReSize:function(){var j=$(".brand-floor");var h=$(".discount-floor");var g=j.length+h.length;if(g>0){if(j.length>0){for(var f=0;f<j.length;f++){if($(j[f]).find(".brand").children().length==3){var e=$(j[f]).find("img").eq(0).height();var c=$(j[f]).find("img").eq(2).height();if(e>0&&c>0){$(j[f]).find("img").eq(1).attr("height",(e+c+1)+"px")}}}}if(h.length>0){for(var f=0;f<h.length;f++){if($(h[f]).find(".discount").children().length==3){var e=$(h[f]).find("img").eq(1).height();var c=$(h[f]).find("img").eq(2).height();if(e>0&&c>0){$(h[f]).find("img").eq(0).attr("height",(e+c+1)+"px")}}}}}},sliderInit:function(e){var c=this;if(e.sliderImgList&&M.object.isArray(e.sliderImgList)){c.sliderImgList=e.sliderImgList}else{c.sliderImgList=[]}},sliderSetUlWidth:function(){var c=this;if(c.sliderImgList.length>1){c.sliderWidth=$("#slider").width();$("#slider_touch").css("width",(c.sliderImgList.length+"00%"));$("#slider_touch").find("li").css("width",c.sliderWidth)}},sliderSetLiWidth:function(){var c=this;if(c.sliderImgList.length>1){$("#slider_touch").find("li").css("width",c.sliderWidth)}},sliderHTML:function(){var f=[];var g=this;for(var e=0;e<g.sliderImgList.length;e++){var c=g.sliderImgList[e];f.push('<li  data-ul-child="child"  class="slide-li"  ><a class="J_ping" report-eventid="MHome_FocusPic" report-eventparam="'+c.sourceValue+'" page_name="index" href="'+c.url+'" ><img alt="'+c.title+'"  src="'+c.img+'"  /></a></li>')}f=f.join("");$("#slider_touch").html("");$("#slider_touch").html(f)},sliderImg:function(){var c=this;if(c.sliderImgIndex<0){c.sliderImgIndex=c.sliderImgList.length-1}else{if(c.sliderImgIndex>=c.sliderImgList.length){c.sliderImgIndex=0}}$("#slider_touch").animate({left:("-"+(c.sliderImgIndex*c.sliderWidth)+"px")},200,"ease-in");$("#serial-number").find("span").removeClass("selected");$("#serial-number").find("span").eq(c.sliderImgIndex).addClass("selected");c.sliderImgIndex++},sliderRun:function(e){var c=this;if(c.sliderTime>=4000){c.sliderImg();c.sliderTime=0}else{c.sliderTime=c.sliderTime+e}},sliderRender:function(){var c=this;c.sliderSetUlWidth();c.sliderHTML();c.sliderSetLiWidth();c.thread.addOne({name:"slider",event:c.sliderRun,source:c});$("#slider").on("touchstart",function(e){c.sliderTouchXY.startX=e.touches[0].clientX;c.sliderTouchXY.startY=e.touches[0].clientY;c.sliderTouchXY.initX=c.sliderTouchXY.startX;c.sliderTouchXY.finishX=0});$("#slider").on("touchmove",function(g){var j=g.touches;var f=g.touches[0].clientX;var e=g.touches[0].clientY;if(Math.abs(e-c.sliderTouchXY.startY)>Math.abs(f-c.sliderTouchXY.startX)){return}g.preventDefault();c.thread.closeOne("slider");c.sliderTime=0;c.sliderTouchXY.finishX=f;var i=Math.abs(f-c.sliderTouchXY.startX);var h=$("#slider_touch").css("left").replace("px","");if(c.sliderTouchXY.startX>f){$("#slider_touch").css("left",(parseInt(h)-i)+"px")}else{$("#slider_touch").css("left",(parseInt(h)+i)+"px")}c.sliderTouchXY.startX=f});$("#slider").on("touchend",function(f){if(c.sliderTouchXY.finishX!=0){if(c.sliderTouchXY.initX>c.sliderTouchXY.finishX){c.sliderImg()}else{if(c.sliderTouchXY.initX<c.sliderTouchXY.finishX){c.sliderImgIndex=c.sliderImgIndex-2;c.sliderImg()}}c.sliderTouchXY.initX=0;c.sliderTouchXY.finishX=0;c.thread.openOne("slider",true)}})},themeImgInit:function(l){var h=this;if(l.themeIdList){if(M.object.isArray(l.themeIdList)){h.themeIdList=l.themeIdList}else{if(M.object.isString(l.themeIdList)){h.themeIdList.push(l.themeIdList)}}if(h.themeIdList.length>0){for(var g=0;g<h.themeIdList.length;g++){h.themeImgTimer[h.themeIdList[g]]={};h.themeImgTimer[h.themeIdList[g]].time=h.threadTime*(g+1);h.themeImgTimer[h.themeIdList[g]].imgArray=[];h.themeImgTimer[h.themeIdList[g]].imgrun=false;h.themeImgTimer[h.themeIdList[g]].rush=0;var c=0;var f=$("#"+h.themeIdList[g]).find("li");for(var e=0;e<f.length;e++){var m=$(f[e]).find("a").find("div").find("img");var k={index:0,num:0};if(m&&m.length>=2){c++;k.num=m.length}h.themeImgTimer[h.themeIdList[g]].imgArray.push(k);if(c>0){h.themeImgTimer[h.themeIdList[g]].imgrun=true}}}}}},themeImgRun:function(f){var c=this;for(var j=0;j<c.themeIdList.length;j++){var e=c.themeIdList[j];var h=c.themeImgTimer[e];if(h.imgrun){var o=$("#"+e).find("li");h.time=h.time-f;if(h.time<=0&&h.imgArray.length>0){var g=h.imgArray;var k=g[h.rush];if(h.runing){}if(k.num>1){var m=k.index;var l=k.index+1;if(l>=k.num){l=0}k.index=l;var n=$(o[h.rush]).find("div").find("img");$(n).eq(m).hide();$(n).eq(l).fadeIn(200)}h.rush++;if(h.rush==g.length){h.time=5000;h.rush=0}}}}},themeImgRender:function(){var c=this;c.thread.addOne({name:"theme",event:c.themeImgRun,source:c})},seckillInit:function(e){var c=this;if(e.seckill){if(e.seckill.seckillTime&&e.seckill.timeRemain){c.endTime=e.seckill.seckillTime;c.timeRemain=e.seckill.timeRemain;c.seckillTime=1000;c.seckillTimer()}}},seckillTimer:function(){var c=this;var e=M.localstorage.get("index_seckill");var l=0;if(e){e=e.split("_");var k=e[0];var o=parseInt(e[1],10);var n=M.date.toDate(e[2]);var p=parseInt(e[3],10);if(c.endTime==k&&c.timeRemain==o){var f=new Date();var j=parseInt((f.getTime()-n.getTime())/1000,10);l=p-j;M.localstorage.set("index_seckill",c.endTime+"_"+c.timeRemain+"_"+M.date.toString(f,"yyyy-MM-dd HH:mm:ss")+"_"+l)}else{var f=new Date();l=c.timeRemain;M.localstorage.set("index_seckill",c.endTime+"_"+c.timeRemain+"_"+M.date.toString(f,"yyyy-MM-dd HH:mm:ss")+"_"+l)}}else{var f=new Date();l=c.timeRemain=c.timeRemain-1;M.localstorage.set("index_seckill",c.endTime+"_"+c.timeRemain+"_"+M.date.toString(f,"yyyy-MM-dd HH:mm:ss")+"_"+l)}if(l>0){var q=l%60;var g=parseInt(l/60,10);var i=g%60;var h=parseInt(g/60,10);if(h<=0){$("#seckill_time").find("span").eq(0).text("0");$("#seckill_time").find("span").eq(1).text("0")}else{if(h>99){$("#seckill_time").find("span").eq(0).text("9");$("#seckill_time").find("span").eq(1).text("9")}else{if(h>9&&h<99){var h=h+"";$("#seckill_time").find("span").eq(0).text(h[0]);$("#seckill_time").find("span").eq(1).text(h[1])}else{var h=h+"";$("#seckill_time").find("span").eq(0).text("0");$("#seckill_time").find("span").eq(1).text(h[0])}}}if(i<=0){$("#seckill_time").find("span").eq(3).text("0");$("#seckill_time").find("span").eq(4).text("0")}else{if(i>9){i=i+"";$("#seckill_time").find("span").eq(3).text(i[0]);$("#seckill_time").find("span").eq(4).text(i[1])}else{$("#seckill_time").find("span").eq(3).text(0);$("#seckill_time").find("span").eq(4).text(i)}}if(q<=0){$("#seckill_time").find("span").eq(6).text("0");$("#seckill_time").find("span").eq(7).text("0")}else{if(q>9){q=q+"";$("#seckill_time").find("span").eq(6).text(q[0]);$("#seckill_time").find("span").eq(7).text(q[1])}else{$("#seckill_time").find("span").eq(6).text(0);$("#seckill_time").find("span").eq(7).text(q)}}}else{$("#seckill_time").find("span").eq(0).text("0");$("#seckill_time").find("span").eq(1).text("0");$("#seckill_time").find("span").eq(3).text("0");$("#seckill_time").find("span").eq(4).text("0");$("#seckill_time").find("span").eq(6).text("0");$("#seckill_time").find("span").eq(7).text("0")}},seckillRun:function(e){var c=this;c.seckillTime=c.seckillTime-e;if(c.seckillTime==0){c.seckillTime=1000;c.seckillTimer()}},seckillRender:function(){var c=this;c.thread.addOne({name:"seckill",event:c.seckillRun,source:c})},appBannerBind:function(){var c=this;var s=c.appBannerID;var l=c.openapp;var o=c.openweb;var n=c.appBannerType;var h=document.createElement("div");h.id=s;var q="/images/index/immediately2.png";var k=null;switch(n){case 1:k=["客户端首单满79元送79元","更多特价商品等你抢"];break;case 2:k=["上客户端 抢专属好礼","天天秒杀 每日专享低价"];break;case 0:k=["买正品 抢低价","客户端抢先购 活动优先知"];break;default:k=["客户端首单满79元送79元","更多特价商品等你抢"];break}var r="display:none; z-index:29;width: 100%;height: 50px;background-color: #2e2e2e;";h.style.cssText=r;h.innerHTML="<div style='margin: 0 auto;width: 320px;height: 50px;zoom: 1;'><img id='"+o+"'  style='width: 13px;height: 13px;display: inline;margin: 18px 0 0 12px;float: left;' src='"+c.url+"/images/index/top-x.png'><a href='javascript:;'><img style='width: 40px;height: 40px;display: inline;float: left;margin: 5px 0 0 11px;' src='"+c.url+"/images/index/top-jdlogo.png'></a><div style='width: 155px;display: inline;float: left;text-align: center;color: #fff;font-family: '华文黑体 细体';font-size: 0;margin-left: 7px;'><span style='font-size: 13px;padding: 8px 0 5px 0;display: inline-block;'>"+k[0]+"</span><span style='font-size: 12px; display: inline-block;'>"+k[1]+"</span></div><a id='"+l+"' href='javascript:;'><img style='width: 65px;height: 30px;float: right;margin: 10px 12px 0 0;' src='"+c.url+q+"'></a></div>";$("#index_search_main").before(h);var j=$("#"+s);if(c.hasAppBanner){j.on("touchmove",function(u){if(u&&u.preventDefault){u.preventDefault()}else{window.event.returnValue=false;return false}});$("#"+l+"").on("touchmove",function(u){if(u&&u.preventDefault){u.preventDefault()}else{window.event.returnValue=false;return false}});$("#"+o+"").on("touchmove",function(u){if(u&&u.preventDefault){u.preventDefault()}else{window.event.returnValue=false;return false}});var g=navigator.userAgent.indexOf("360 Aphone")>=0||navigator.userAgent.indexOf("QHBrowser")>=0||navigator.userAgent.indexOf("360 Iphone")>=0;var m=M.url.getParam("utm_campaign");if(m&&m=="t_vivobrowser_vivobrowser"){g=true}if(!g){var n=c.appBannerType;var h=document.createElement("div");var t=null;var i=null;var p=null;var f=null;if(c.appBannerType==1){t="MDownLoadFloatTop_OpenNow";i="MDownLoadFloatTop_Close";f="MDownLoadFloatTop_Expose_Virtual";p="http://h5.m.jd.com/active/download/download.html?channel=jd-mxz1"}else{if(c.appBannerType==2){t="MDownLoadFloatTop_OpenImmediately";i="MDownLoadFloatTop_CloseImmediately";f="MDownLoadFloatTop_Expose_VirtualImmediately";p="http://h5.m.jd.com/active/download/download.html?channel=jd-mxz3"}else{if(c.appBannerType==0){t="MDownLoadFloatTop_OpenC";i="MDownLoadFloatTop_CloseC";f="MDownLoadFloatTop_Expose_VirtualC";p="http://h5.m.jd.com/active/download/download.html?channel=jd-msy"}}}var e={openAppBtnId:l,closePanelBtnId:o,closePanelId:s,downAppURl:p,closeCallblack:function(){var u=this;j.attr("search_land_searchTransformation_show","true");u.indexFloatLayerRunOpen=true;$("#topheader").css("display","none")},closeCallblackSource:c,cookieFlag:"m_index",openAppEventId:t,closePanelEventId:i,sourceType:"M",sourceValue:"index"};$.downloadAppPlugIn(e);if(j.css("display")!="none"){$("#topheader").removeClass("topheader-hidden").addClass("topheader");M.require("http://h5.m.jd.com/active/track/mping.min.js",function(){try{var v=new MPing.inputs.Click(f);v.event_param="";var u=new MPing();u.send(v)}catch(w){M.log(d,"error")}})}}else{c.fireworksLaod();c.indexFloatLayerRunOpen=true}}else{c.fireworksLaod();c.indexFloatLayerRunOpen=true}},fireworksInit:function(c){var e=this;e.fireworksLocalStorageKey="fireworks_Date";e.fireworksleafId="leafContainer";if(c&&c.open){e.fireworksPicWidht=216;e.fireworksPicHheight=297;e.fadeAndDropDuration="7s";e.fireworksBalloonPlayTime=10;e.fireworksBalloonDelayTime=0;e.colourBarNum=9;e.fireworksDir=c.dir;e.countImg=0;e.fireworksImgArr=[e.fireworksDir+"/images/index/floatBg.png",e.fireworksDir+"/images/index/618-lihua1.png"];e.fireworksOpen=c.open}},fireworksLaod:function(){var j=this;var c=M.date.today();var h=M.localstorage.get(j.fireworksLocalStorageKey);if(j.fireworksOpen&&h!=c){var g=0;for(var e=0;e<j.fireworksImgArr.length;e++){var f=new Image();f.onload=function(){var i=j;i.countImg++;if(i.countImg==i.fireworksImgArr.length){i.fireworksRun();M.localstorage.set(i.fireworksLocalStorageKey,M.date.today())}};f.src=j.fireworksImgArr[e]}}},fireworksCtreteStyle:function(){var l=this;var j=[];var c=$(window).width();var i=$(window).height();var g=(c-l.fireworksPicWidht)+"px";var e=-(i+l.fireworksPicHheight)/2+"px";var k=0+"px";var f=-(i+l.fireworksPicHheight+80)+"px";j.push("<style>");j.push("@-webkit-keyframes drop {");j.push("0%   { -webkit-transform: translate3d(0px, -50px,0)}");j.push("50%  { -webkit-transform: translate3d(0px,"+((i+225)*0.8+"px")+",0)}");j.push("100% { -webkit-transform: translate3d(0px,"+((i+225)+"px")+",0); }");j.push("}");j.push("@keyframes drop {");j.push("0%   { transform: translate3d(0px, -50px,0)}");j.push("50%  {transform: translate3d(0px,"+((i+235)*0.8+"px")+",0)}");j.push("100% { transform: translate3d(0px,"+((i+235)+"px")+",0); }");j.push("}");j.push("@-webkit-keyframes moveUp {");j.push("0%{-webkit-transform: translate3d(0,0,0);}");j.push("50%{-webkit-transform: translate3d("+g+","+e+",0)}");j.push("100%{-webkit-transform: translate3d("+k+","+f+",0)}");j.push("}");j.push("@keyframes moveUp {");j.push("0%{transform: translate3d(0,0,0)}");j.push("50%{transform: translate3d("+g+","+e+",0)}");j.push("100%{transform: translate3d("+k+","+f+",0)}");j.push("}");j.push("</style>");return j.join("")},fireworksCreatColourBarDivHtml:function(){var c=this;var h=[];var n=$(window).width();for(var g=0;g<c.colourBarNum;g++){var f=c.fireworksRnd(1,15);var k=c.fireworksRandomFloat(0,3)+"s";var j=c.fireworksRandomFloat(0,1)+"s";var l=(Math.random()<0.5)?"clockwiseSpin":"counterclockwiseSpinAndFlip";var m="animation-name:"+l+";-webkit-animation-name:"+l+";animation-delay:"+j+";-webkit-animation-delay:"+j+";";var e="top:"+(-c.fireworksRnd(100,110)+"px;")+"left:"+(c.fireworksRnd(0,n)+"px;")+"z-index:30;-webkit-animation-name:fade,drop;animation-name:fade,drop;animation-timing-function:ease-in;-webkit-animation-timing-function:ease-in;animation-duration:"+c.fadeAndDropDuration+";-webkit-animation-duration:"+c.fadeAndDropDuration+";animation-delay:"+k+";-webkit-animation-delay:"+k+";";h.push('<div style="'+e+'">');h.push('<span class="float-bg'+f+'" style="'+m+'">');h.push("</span>");h.push("</div>")}return h.join("")},fireworksBalloonHtml:function(){var f=this;var c=[];var e="bottom:"+(-f.fireworksPicHheight+"px;")+"left:0;position:fixed;z-index:30;width:"+f.fireworksPicWidht+"px;height:"+f.fireworksPicHheight+"px;animation:moveUp "+f.fireworksBalloonPlayTime+"s "+f.fireworksBalloonDelayTime+"s;-webkit-animation:moveUp "+f.fireworksBalloonPlayTime+"s "+f.fireworksBalloonDelayTime+"s;";c.push('<div style="'+e+'">');c.push('<img src="'+f.fireworksDir+'/images/index/618-lihua1.png"width="'+f.fireworksPicWidht+'" height="'+f.fireworksPicHheight+'">');c.push("</div>");return c.join("")},fireworksRun:function(){var c=this;$("body").append('<div id="'+c.fireworksleafId+'"><div>');$("#"+c.fireworksleafId).append(c.fireworksCtreteStyle());$("#"+c.fireworksleafId).append(c.fireworksCreatColourBarDivHtml());$("#"+c.fireworksleafId).append(c.fireworksBalloonHtml());var e=setInterval(function(){$("#"+c.fireworksleafId).append(c.fireworksCreatColourBarDivHtml())},350);setTimeout(function(){clearInterval(e);setTimeout(function(){$("#"+c.fireworksleafId).remove()},7000)},7000)},fireworksRnd:function(e,c){return parseInt(Math.random()*(c-e)+e)},fireworksRandomFloat:function(e,c){return e+Math.random()*(c-e)},floatLayerInit:function(c){var e=this;if(c&&c.url&&$.trim(c.url)!="0"){e.floatUrl=c.url;e.indexFloatLayerId="indexFloatLayer";e.indexFloatLayerRunOpen=false;e.indexFloatLayerRunTimer=0}},floatLayerRender:function(){var c=this;if(c.floatUrl){c.thread.addOne({name:"floatLayer",event:function(){var f=this;if(f.indexFloatLayerRunOpen){if($("#"+f.indexFloatLayerId).css("transform")=="none"||$("#"+f.indexFloatLayerId).css("-webkit-transform")=="none"||$("#"+f.indexFloatLayerId).css("transform")==""||$("#"+f.indexFloatLayerId).css("-webkit-transform")==""||$("#"+f.indexFloatLayerId).css("transform")=="translateX(0px)"||$("#"+f.indexFloatLayerId).css("-webkit-transform")=="translateX(0px)"){if(f.indexFloatLayerRunTimer>12){f.indexFloatLayerRunTimer=0}f.indexFloatLayerRunTimer++;if(f.indexFloatLayerRunTimer==12){var e={transform:"translateX(40px)","-webkit-transform":"translateX(40px)","-webkit-transition":"0.2s ease 0s",transition:"0.2s ease 0s"};$("#"+f.indexFloatLayerId).css(e);setTimeout(function(){var g={transform:"translateX(40px)","-webkit-transform":"translateX(40px)","-webkit-transition":"",transition:""};$("#"+f.indexFloatLayerId).css(g)},200)}}else{f.indexFloatLayerRunTimer=0}}},source:c});c.floatLayerBind();$("#"+c.indexFloatLayerId).css("display","block")}},floatLayerBind:function(){var c=this;if(c.floatUrl){$("#"+c.indexFloatLayerId).on("click",function(){var e={transform:"translateX(0px)","-webkit-transform":"translateX(0px)","-webkit-transition":"0.2s ease 0s",transition:"0.2s ease 0s"};$("#"+c.indexFloatLayerId).css(e);setTimeout(function(){location.href=c.floatUrl},200)})}},toTopBind:function(){var c=this;$("#"+c.runtopId).on("click",function(){if(c.touchhandler){var h=c.touchhandler;h.goToEnd(0,$("#scwrapper")[0],h.rootheight)}else{window.scrollTo(0,0)}var e=$("#"+c.appBannerID+"");if(e&&e.height()>0){var f=$("#fixedtop");var g=$("#topheader");f.removeClass("showfixedtop-half").addClass("showfixedtop");g.css("display","block");c.under=1}if($("#slider").height()>0){$($("#index_search_head").children()[0]).css("opacity",0)}})},recordIndexLoc:function(){var f=this;$("#index_searchLogin").on("click",function(){M.cookie.setCookie("location",$(window).scrollTop(),0.0035,"","jd.com")});var c=M.url.getParam("indexloc");if(c&&c=="1"){var g=M.cookie.getCookie("location");M.cookie.delCookie("location");var e=parseInt(g);if(!isNaN(e)){$(window).on("load",function(){window.scrollTo(0,e);if(e>=50){var h=$("#"+f.appBannerID+"");if(h&&h.height()>0){topheader.css("display","none");fixedtop.removeClass("showfixedtop").addClass("showfixedtop-half")}}})}}},recommendInit:function(e){var c=this;if(e){c.recommendPin=e.pin;c.recommendUesCached=e.useCached;c.recommendOpen=e.open;c.recommendPage=0;c.recommendPageCount=1;c.recommendListId="recommendList";c.recommendListLoadId="recommendListload";c.recommendListloadImg="recommendListloadImg";c.recommendListLoadMoreBtn="recommendListLoadMoreBtn";c.recommendCanLoad=true;c.recommendloadHeight=0}},recommendLoadData:function(){var i=this;if(i.recommendCanLoad&&i.recommendPageCount>=(i.recommendPage+1)){i.recommendCanLoad=false;$("#"+i.recommendListLoadId).css("display","block;");$("#"+i.recommendListloadImg).css("display","block;");$("#"+i.recommendListLoadMoreBtn).css("display","none;");var e="indexRecommendData";var h=null;if(i.recommendUesCached){var f=M.localstorage.get(e);f=JSON.parse(f);if(f&&f.length==2){if(i.recommendPin){h=f[1];if(h.length>=(i.recommendPage+1)){h=h[i.recommendPage]}else{h=null}}else{h=f[0];if(h.length>=(i.recommendPage+1)){h=h[i.recommendPage]}else{h=null}}if(!h||(new Date().getTime()-h.updateTime)>(4*60*60*1000)||h.pin!=i.recommendPin){h=null}}else{var j=JSON.stringify([[],[]]);M.localstorage.set(e,j)}}else{M.localstorage.remove(e)}if(h==null){M.http.ajax({url:"/index/recommend.action",data:"_format_=json&page="+(i.recommendPage+1),success:function(m){var n=false;var p=false;if(m&&m.recommend){try{h=JSON.parse(m.recommend)}catch(r){M.log(r,"error");h=null}if(h&&h.recommendList&&h.recommendList.length>0){if(i.recommendPage==0){var l=i.recommendMainHtml(h);$("#origin-viewport").append(l);i.recommendBind()}var q=i.recommendListHtml(h);$("#"+i.recommendListId).append(q);i.calculationRecommendImg();if(i.recommendUesCached){h.updateTime=new Date().getTime();h.pin=i.recommendPin;var o=M.localstorage.get(e);o=JSON.parse(o);if(o&&M.object.isArray(o)){if(i.recommendPin){if(o[1].length>=(i.recommendPage+1)){o[1][i.recommendPage]=h}else{o[1].push(h)}}else{if(o[0].length>=(i.recommendPage+1)){o[0][i.recommendPage]=h}else{o[0].push(h)}}}M.localstorage.set(e,JSON.stringify(o))}i.recommendPageCount=h.totalPage;i.recommendPage++;var s=M.url.getParam("recommend");if(s=="1"&&i.recommendPage==1){M.url.setHash("recommend");window.location=window.location}i.imgLazyLad.lazyLad();i.recommendloadHeight=$("#scwrapper").height()-$("#"+i.recommendListId).find("li").eq(0).height()*4;if(i.recommendPage%3==0&&i.recommendPage<i.recommendPageCount){n=true}else{n=false}p=true}}if(p){if(n){$("#"+i.recommendListLoadId).css("display","block;");$("#"+i.recommendListloadImg).css("display","none;");$("#"+i.recommendListLoadMoreBtn).css("display","block;")}else{$("#"+i.recommendListLoadId).css("display","none;");$("#"+i.recommendListloadImg).css("display","none;");$("#"+i.recommendListLoadMoreBtn).css("display","none;");i.recommendCanLoad=true}}else{i.recommendloadHeight=$("#scwrapper").height()-$("#"+i.recommendListId).find("li").eq(0).height()*4;i.recommendCanLoad=false;$("#"+i.recommendListLoadId).css("display","none;");$("#"+i.recommendListloadImg).css("display","none;");$("#"+i.recommendListLoadMoreBtn).css("display","none;")}if(i.touchhandler){i.touchhandler.fixetRootHeight($("#scwrapper").height()-$(window).height())}},error:function(){i.recommendloadHeight=$("#scwrapper").height()-$("#"+i.recommendListId).find("li").eq(0).height()*4;i.recommendCanLoad=false;$("#"+i.recommendListLoadId).css("display","none;");$("#"+i.recommendListloadImg).css("display","none;");$("#"+i.recommendListLoadMoreBtn).css("display","none;")}})}else{if(i.recommendPage==0){var c=i.recommendMainHtml(h);$("#origin-viewport").append(c);i.recommendBind()}var g=i.recommendListHtml(h);$("#"+i.recommendListId).append(g);i.calculationRecommendImg();var k=M.url.getParam("recommend");i.recommendPageCount=h.totalPage;i.recommendPage++;i.recommendloadHeight=$("#scwrapper").height()-$("#"+i.recommendListId).find("li").eq(0).height()*4;if(k=="1"&&i.recommendPage==1){M.url.setHash("recommend");window.location=window.location}i.imgLazyLad.lazyLad();if(i.recommendPage%3==0&&i.recommendPage<i.recommendPageCount){$("#"+i.recommendListLoadId).css("display","block;");$("#"+i.recommendListloadImg).css("display","none;");$("#"+i.recommendListLoadMoreBtn).css("display","block;")}else{$("#"+i.recommendListLoadId).css("display","none;");$("#"+i.recommendListloadImg).css("display","none;");$("#"+i.recommendListLoadMoreBtn).css("display","none;");i.recommendCanLoad=true}}}if(i.touchhandler){i.touchhandler.fixetRootHeight($("#scwrapper").height()-$(window).height())}},recommendMainHtml:function(k){var j=this;var h=[];if(k&&k.recommendList&&k.recommendList.length>0){h.push('<div id="recommend" class="floor love-floor" id="love-floorID">');var f=j.recommendPin?"login-succeed":"login-before";var e=j.recommendPin?"登录成功！为您推荐":"登录后更懂你";var i="http://m.jd.com?recommend=1";var g=j.recommendPin?"":'class="J_ping" report-eventid="MHomeGuessYouLike_Login"  page_name="index"';var c=j.recommendPin?"javascript:void(0)":"https://passport.m.jd.com/user/login.action?returnurl="+i;h.push('<h2 style="padding-bottom: 0px;" class="love-floor-title '+f+'">');h.push("猜你喜欢");h.push("<a "+g+' href="'+c+'">');h.push('<i class="love-right-icon"></i>');h.push('<span id="love-login-info" class="love-login">'+e+"</span>");h.push('<i class="love-login-icon"></i>');h.push("</a>");h.push("</h2>");h.push('<ul class="love-list" id="'+j.recommendListId+'">');h.push("</ul>");h.push('<div style="clear: left;"></div>');h.push('<div style="display: none;" class="swipe-up love-loading" id="'+j.recommendListLoadId+'">');h.push('<div class="swipe-up-wrapper ">');h.push('<div style="display: none;" id="'+j.recommendListloadImg+'" class="loading-con">');h.push('<span class="pagenum" id="showPageID"></span>');h.push('<span class="loading"><i class="love-loading-icon">加载中...</i></span>');h.push('<div class="clear"></div>');h.push("</div>");h.push('<div style="display: none;" id="'+j.recommendListLoadMoreBtn+'" class="click-loading"><a href="javascript:void(0);">点击继续加载</a></div>');h.push("</div>");h.push("</div>");h.push("</div>")}return h.join("")},recommendListHtml:function(g){var f=this;var e=[];if(g&&g.recommendList&&g.recommendList.length>0){for(var c=0;c<g.recommendList.length;c++){e.push('<li class="love-item"><a class="J_ping" report-eventid="MHomeGuessYouLike_Products"  report-eventparam="'+(f.recommendPage*20+c+1)+"_"+g.recommendList[c].wareId+'_1" page_name="index" href="http://item.m.jd.com/product/'+g.recommendList[c].wareId+'.html">');e.push('<div alt="'+g.recommendList[c].wname+'" class="love-item-pic"><img src="/images/index/m-home-pic.png" imgsrc="'+g.recommendList[c].imageurl+'" ></div>');e.push('<div class="love-item-title"><span>'+g.recommendList[c].wname+"</span></div>");e.push("</a>");e.push('<div class="love-item-bottom">');e.push('<span class="love-item-price">￥<i>'+g.recommendList[c].jdPrice+"</i></span>");e.push('<a class="J_ping" report-eventid="MHomeGuessYouLike_Similarities"  report-eventparam="'+(f.recommendPage*20+c+1)+"_"+g.recommendList[c].wareId+'_1" page_name="index" href="/index/lookSimilar.action?wid='+g.recommendList[c].wareId+'"><span class="love-item-icon">看相似</span></a>');e.push("</div>");e.push("</li>")}}return e.join("")},recommendBind:function(){var c=this;if(c.recommendOpen){$("#"+c.recommendListLoadMoreBtn).on("touchstart",function(){c.recommendCanLoad=true;c.recommendLoadData()})}},recommendRender:function(){var c=this;if(c.recommendOpen){c.recommendLoadData()}},calculationRecommendImg:function(){var e=this;var c=$("body").width();$("#"+e.recommendListId).find("img").forEach(function(g,f){var h=$(g).parent().width();$(g).css({width:h,height:h})})},resizeFunction:function(){var g=this;var e="onorientationchange" in window;var c=e?"orientationchange":"resize";var f=$("#seckillul").find("img");var h=f.length;f.each(function(){var i=this;i.onload=function(){h--;if(h==0){g.resizeSeckimg(f)}}});$(window).on(c,function(){g.computeHigthReSize();if(g.recommendOpen&&g.recommendCanLoad){g.recommendloadHeight=$("#scwrapper").height()-$("#"+g.recommendListId).find("li").eq(0).height()*4}g.calculationRecommendImg();g.resizeSeckimg(f,true)})},resizeSeckimg:function(h,g){for(var f=0,c=h.length;f<c;f++){var e=parseInt($(h[f]).width(),10);var j=parseInt($(h[f]).height(),10);if(g||e!=j){$(h[f]).height(e+"px")}}},touchFunction:function(){document.body.style.overflow="hidden";var m=this;var e,l,o,p,t,w,u,n,q,v,x,c,g;var i=1;m.under=1;var s=m.touchhandler;function r(B){var z=$(document.body);var f=s.getY();var A=Math.abs(f);k(B);h(B);if(A>=z.height()){$("#"+m.runtopId).show()}else{$("#"+m.runtopId).hide()}if(m.recommendOpen){if(m.recommendCanLoad&&A>=m.recommendloadHeight){m.recommendLoadData()}}m.imgLazyLad.lazyLad()}function j(B){var y=$(document.body);var f=s.getY();var A=Math.abs(B);k(B);h(B);var z=parseInt(x.height());if(B>=-z&&B<=0){}if(A>=y.height()){$("#"+m.runtopId).show()}else{$("#"+m.runtopId).hide()}if(m.recommendOpen){if(m.recommendCanLoad&&A>=m.recommendloadHeight){m.recommendLoadData()}}m.imgLazyLad.lazyLad()}function h(A){if($("#slider").height()<=0){e.css("opacity",0.85);return}var f=A;var z=Math.abs(A);if(f>=-w){e.css("opacity",z<t?n:q*((z-t)/w));v=1}else{if(v==1){e.css("opacity",q);v=0}}}function k(A){var f=A;var z=x.height();if(z==0){return}if(f>=0){if(i==1){o.removeClass("showfixedtop-half").addClass("showfixedtop");p.css("display","block");m.under=1}i=0}else{if(m.under==1){p.css("display","none");o.removeClass("showfixedtop").addClass("showfixedtop-half");i=1}m.under=0}}s.touchfn({movefn:r,endfn:j,endafterfn:j});s.run();$(window).on("load",function(){s.fixetRootHeight($("#scwrapper").height()-$(window).height());var f=$("#slider");e=$($("#index_search_head").children()[0]);l=$("#index_search_main");o=$("#fixedtop");p=$("#topheader");x=$("#"+m.appBannerID+"");c=$(window);t=e.height();w=f.height()-t;g=x.height();m.searchbarrgb=e.css("opacity");n=0,q=0.85;v=Math.abs(s.getY())<=w?0:1;h(0);$("body").height($(window).height())})},scrollFunction:function(){var o=this;var h,n,q,r,t,x,v,p,s,w,y,g,i;var l=1;var e={};o.under=1;$(document).ready(function(){h=$($("#index_search_head").children()[0]);n=$("#index_search_main");q=$("#fixedtop");r=$("#topheader");y=$("#"+o.appBannerID+"");g=$(window)});$(window).on("load",function(){var f=$("#slider");t=h.height();x=f.height()-t;i=y.height();o.searchbarrgb=h.css("opacity");p=0,s=0.85;w=$(window).scrollTop()<=x?0:1;setTimeout(function(){var z=$(window).scrollTop();w=1;k(z);if(z>0){o.imgLazyLad.lazyLad()}},0)});function k(z){if($("#slider").height()<=0){h.css("opacity",0.85);return}var f=z;if(f<=x){h.css("opacity",f<t?p:s*((f-t)/x));w=1}else{if(w==1){h.css("opacity",s);w=0}}}$(window).on("touchstart",function(f){u=false;j=false;var z=f.touches[0];e.starty=z.clientY;e.startx=z.clientX;e.inity=e.starty;e.scrolly=0;e.lastdate=Date.now();e.lastY=0});$(window).on("touchmove",function(D){var F=D.touches[0];var A=F.clientY;var B=F.clientX;var z=$(window);var f=z.scrollTop();if(f<0){return}e.diry=A-e.starty;e.dirx=B-e.startx;if(Math.abs(e.diry)<=Math.abs(e.dirx)){direct=0;return}var E=A-e.starty;if(E*e.lastgap<0){e.inity=A}e.scrolly=A-e.inity;if(e.diry<0){if(f>=0){var C=y.height();if(C!=null&&C!=0){r.css("display","none");q.removeClass("showfixedtop").addClass("showfixedtop-half");l=1}}k(f+Math.abs(e.scrolly))}else{k(f-Math.abs(e.scrolly))}e.starty=A;e.startx=B;e.lastgap=E});$(window).on("touchend",function(f){});var u=false,c=0,j=false,m=new Date();$(window).scroll(function(B){if(!u){}var z=$(window);var f=z.scrollTop();if(f<0){return}var A=y?y.height():50;if(A!=null&&A!=0){if(f==0){if(!j){q.removeClass("showfixedtop-half").addClass("showfixedtop");r.css("display","block");o.under=1;j=true}}else{r.css("display","none");q.removeClass("showfixedtop").addClass("showfixedtop-half");l=1}}if($("#slider").height()<=0){h.css("opacity",0.85)}else{if(f<=x){h.css("opacity",f<t?p:s*((f-t)/x));c=0}else{if(c==0){h.css("opacity",s);c=1}}}if(f>=z.height()){$("#"+o.runtopId).show()}else{$("#"+o.runtopId).hide()}if(o.recommendOpen){if(o.recommendCanLoad&&f>=o.recommendloadHeight){o.recommendLoadData()}}o.imgLazyLad.lazyLad();if(!!!o.searchLand.openSearchLoad){o.indexloc=f}else{r.css("display","none")}})},run:function(){var c=this;if(c.sliderImgList&&c.sliderImgList.length>1){c.sliderHTML();slide("#slider").init({loop:true,smallBtn:true,autoPlay:true,autoHeight:true,playTime:3000})}if(c.themeIdList&&c.themeIdList.length>0){c.themeImgRender()}if(c.endTime){c.seckillRender()}if(c.hasAppBanner){c.appBannerBind()}c.floatLayerRender();c.resizeFunction();if(c.touchhandler){c.touchFunction()}else{c.scrollFunction()}c.recordIndexLoc();c.toTopBind();c.searchLand.render();c.recommendRender();c.thread.start();c.imgLazyLad.lazyLad()}});a.clazz=b});M.define("touchHandler",function(b){var a=function(e){this.init(e)};M.object.merge(a.prototype,{init:function(e){c.target=null;c.noscroll=false;c.direct=0;c.up=false;c.left=false;c.endfn=function(){};c.movefn=function(){};c.startfn=function(){};if(e!=null&&M.object.isObject(e)){M.object.merge(c,e)}},getY:function(g){var f=this;if(!!!g){g=f.tar}var e=$(g).css("transform");if(!e){e=$(g).css("-webkit-transform")}if(e=="none"){e=0}else{e=e.replace("translateY(","").replace(")","");e=parseFloat(e,10)}if(!e){e=0}return e},goToEnd:function(e,j,g){var i=this;var h=null;var f=null;if(g>0){if(e<(g*-1)){h={transform:"translateY("+(g*-1)+"px)","-webkit-transform":"translateY("+(g*-1)+"px)","-webkit-transition":"0.2s ease 0s",transition:"0.2s ease 0s"};f={transform:"translateY("+(g*-1)+"px)","-webkit-transform":"translateY("+(g*-1)+"px)","-webkit-transition":"",transition:""}}else{if(e>0){h={transform:"translateY("+(e)+"px)","-webkit-transform":"translateY("+(e)+"px)","-webkit-transition":"0.2s ease 0s",transition:"0.2s ease 0s"};f={transform:"translateY(0px)","-webkit-transform":"translateY(0px)"}}}}if(e!=0){$(j).css(h);setTimeout(function(){$(j).css(f)},200);return true}else{$(j).css({transform:"translateY(0px)"});$(j).css({"-webkit-transform":"translateY(0px)"});return false}},fixetRootHeight:function(e){this.rootheight=e},getAnimationobj:function(i){i=Math.abs(i);var h=[],g=0,e=1.73;var f=this.screenheight;f=[f*0.25,f*0.75,f];if(i>0&&i<=40){h.push(200);h.push(e*0.25)}else{if(i>40&&i<=f[0]){h.push(f[0]*2);h.push(e*0.33)}else{if(i>f[0]&&i<=f[1]){h.push(f[2]);h.push(e*0.5)}else{if(i>f[1]&&i<=f[2]){h.push(f[2]*2);h.push(e)}}}}return h},animateY:function(f,e){this.tar.style.cssText="transform:translateY("+f+"px);-webkit-transform:translateY("+f+"px);transition:-webkit-transform "+e+"s cubic-bezier(0.333333, 0.666667, 0.666667, 1);-webkit-transition:-webkit-transform "+e+"s cubic-bezier(0.333333, 0.666667, 0.666667, 1)"},gotoY:function(e,f){if(!!!e){e=this.tar}e.style.cssText="transform:translateY("+f+"px);-webkit-transform:translateY("+f+"px);"},getObj:function(){return this.tar},run:function(){var h=this;var e=c.target;var f=$(e);h.tar=e;var k=c.direct;var i={};var g=0;h.screenheight=$(window).height();h.rootheight=$(e).height()-h.screenheight;rootheight=h.rootheight;var j=[];if(c.noscroll){window.onscroll=null;$(window).on("scroll",function(l){if(l&&l.preventDefault){l.preventDefault()}l.returnValue=false});$(e).on("touchend",function(p){var s=p.changedTouches[0];var o=s.clientY;var n=h.getY(e);if(n>0||n<(-1*h.rootheight)){if(c.endfn){c.endfn(n>=0?0:-h.rootheight)}setTimeout(function(){h.goToEnd(n,e,h.rootheight)},50);return}if(i.diry<5&&i.diry>-5){return}g=i.diry>0?1:-1;var r=n;var q=h.getAnimationobj(i.scrolly);var l=r+q[0]*g;var l=r+q[0]*g;if(l>120||l<(-1*h.rootheight)){if(c.endfn){c.endfn(l>=0?0:-h.rootheight)}setTimeout(function(){h.goToEnd(l,e,h.rootheight)},50);return}var m=setTimeout(function(){h.animateY(l,q[1])},50);j.push(m);if(c.endfn){c.endfn(l)}});$(e).on("touchmove",function(q){q.preventDefault();var s=q.touches[0];var o=s.clientY;var p=s.clientX;i.diry=o-i.starty;i.dirx=p-i.startx;var r=o-i.starty;if(r*i.lastgap<0){i.inity=o}var m=h.getY(e);var n=m+(m>0?r*0.23:r);if(n>350||n<(-1*h.rootheight-250)){return}f.css("transform","translateY("+n+"px)");f.css("-webkit-transform","translateY("+n+"px)");i.scrolly=o-i.inity;i.starty=o;i.lastgap=r;var l=Date.now();if(l-i.lastdate>500){i.lastdate=l;i.lastY=h.getY(e);if(c.movefn){c.movefn(n)}}});$(e).on("touchstart",function(n){$(e).css("transition","");$(e).css("-webkit-transition","");for(var m=0,l=j.length;m<l;m++){clearTimeout(j[m])}j=[];var o=n.touches[0];i.starty=o.clientY;i.startx=o.clientX;i.inity=i.starty;i.scrolly=0;i.lastdate=Date.now();i.lastY=0})}},touchEndfn:function(e){c.endfn=M.object.isFunction(e)?e:null},touchMovefn:function(e){c.movefn=M.object.isFunction(e)?e:null},touchStartfn:function(e){c.startfn=M.object.isFunction(e)?e:null},touchfn:function(e){if(M.object.isObject(e)){M.object.merge(c,e)}}});var c=a;b.clazz=a});M.define("searchland",function(a){var b=function(c){this.init(c)};M.object.merge(b.prototype,{init:function(g){this.searchHistoryLocalStorageName="searchhistory";this.formId=g.formId?g.formId:"";this.submitId=g.submitId?g.submitId:"";this.catelogyListId=g.catelogyListId?g.catelogyListId:"";this.isHome=g.isHome?g.isHome:false;this.renderId=g.renderId?g.renderId:"";this.closeSearchLandBtnId=g.closeSearchLandBtnId?g.closeSearchLandBtnId:"";this.claerKeywordBtnId=g.claerKeywordBtnId?g.claerKeywordBtnId:"";this.keywordId=g.keywordId?g.keywordId:"";this.searchPanelId=g.searchPanelId?g.searchPanelId:"";this.keyword=g.keyword?g.keyword:"";this.keywordIsObj=false;if(M.object.isObject(this.keyword)){this.keywordIsObj=true}else{this.keyword=M.string.decodeHtml(this.keyword)}this.oldkeyword=null;var c="searchhistory_";this.controlId=M.genId(c);this.hotKeyWordId=M.genId(c);this.changeHotKeyWordId=M.genId(c);this.hotKeyWordheadId=M.genId(c);this.searchhistoryTipId=M.genId(c);this.hotKeyWordBtnIds=[];this.clearHistoryId=M.genId(c);this.hotKeyword=g.hotKeyword?g.hotKeyword:null;this.landSearchWordHide=g.landSearchWordHide?true:false;this.hotKeywordIndex=0;this.openSearchLoad=false;this.searchliIdList=[];this.searchLoop=false;this.showFuncObj=g.showFuncObj?g.showFuncObj:null;this.hideFuncObj=g.hideFuncObj?g.hideFuncObj:null;if(this.keyword){var f=this.keyword;if(this.keywordIsObj){f=this.keyword.showWord?this.keyword.showWord:"";if(this.keyword.keyword){if(this.keyword.keyword!=this.keyword.realWord){var e=M.string.decodeHtml(this.keyword.keyword);$("#"+this.keywordId).val(e)}else{$("#"+this.keywordId).val("")}}$("#"+this.keywordId).attr("placeholder",f)}else{$("#"+this.keywordId).val(f);$("#"+this.keywordId).attr("placeholder","")}$("#"+this.keywordId).addClass("hilight1")}},searchLoadControl:function(){var e=this;var c=$("#"+e.keywordId).val().trim();if(c==""&&e.searchLoop){e.searchLoadFromHistory();$("#"+e.claerKeywordBtnId).css({display:"none"})}else{if(c!=""&&e.oldkeyword!=c&&e.searchLoop){e.searchLoadFromKeyword(c);$("#"+e.claerKeywordBtnId).css({display:"block"})}}setTimeout(function(){e.searchLoadControl()},500)},searchLoadFromHistory:function(){var g=this;g.searchLoop=false;if(!g.searchLocalStorage){var c=M.localstorage.get(g.searchHistoryLocalStorageName);try{c=JSON.parse(c)}catch(h){c=null;M.localstorage.remove(g.searchHistoryLocalStorageName)}if(c!=null&&!M.object.isArray(c)){c=null;M.localstorage.remove(g.searchHistoryLocalStorageName)}if(c&&c.length>0&&g.openSearchLoad){var f=c;g.searchLandUnbind();$("#"+g.controlId).html("<strong>历史</strong>"+g.searchLandLiHtml(f,true));$("#"+g.clearHistoryId).parent().css({display:"block;"});g.searchLandBind(true);g.tipArray=f;$("#"+g.controlId).removeClass("jd-auto-complete");$("#"+g.controlId).children("li").css({display:"block"});g.searchLoop=true}else{$("#"+g.controlId).html("");g.searchLoop=true}$("#"+g.hotKeyWordId).show();$("#"+g.hotKeyWordheadId).show()}else{if(g.openSearchLoad){g.searchLoop=true}}g.searchLocalStorage=true},searchLoadFromKeyword:function(c){var e=this;e.searchLoop=false;e.oldkeyword=c;e.searchLocalStorage=false;M.http.ajax({url:"/ware/searchSuggestion.action",data:{keyword:c,_format_:"json"},success:function(g){if(g&&g.searchTipList&&e.openSearchLoad){var f=JSON.parse(g.searchTipList);if(f.length>0){e.searchLandUnbind();$("#"+e.hotKeyWordId).hide();$("#"+e.hotKeyWordheadId).hide();$("#"+e.controlId).html(e.searchLandLiHtml(f));$("#"+e.controlId).addClass("jd-auto-complete");e.searchLandBind(false);e.tipArray=f;$("#"+e.clearHistoryId).parent().css({display:"none;"});$("#"+e.controlId).children("li").css({display:"block"})}e.searchLoop=true}else{if(e.openSearchLoad){e.searchLoop=true}}},error:function(f){if(e.openSearchLoad){e.searchLoop=true}}})},searchLandLiHtml:function(n,e){var c=this;c.searchliIdList=[];var g=[];var l="search-history-li";if(!e){l="search-landing-li"}for(var h=0;h<n.length;h++){var f="searchland_li_"+h;c.searchliIdList.push(f);var m="";var j="&nbsp;";m=n[h].text;g.push('<li searchland_index="'+h+'" id="'+f+'"  style="display: block;" class="'+l+'">');g.push('<a href="javascript:void(0);">');if(!e){var k="search-result-old-icon search-magnifier-icon";if(n[h].otherAttr){if(n[h].otherAttr.isSearchShop){k="search-result-icon search-shop-icon"}}g.push('<i class="'+k+'"></i>')}g.push('<span class="search-landing-entry">'+m+"</span>");if(!e){if(n[h].otherAttr&&n[h].otherAttr.tipNumber){g.push('<span class="search-landing-num">约'+n[h].otherAttr.tipNumber+"条结果</span>")}}g.push("</a>");g.push("</li>")}return g.join("")},searchLandLiFade:function(){var e=this;var c=0;e.searchLandLiRecursiveFade(c,e.searchliIdList.length)},searchLandLiRecursiveFade:function(c,e){var f=this;if(c<e){$("#"+f.searchliIdList[c]).fadeIn(10,function(){var g=c+1;f.searchLandLiRecursiveFade(g,e)})}else{f.searchLoop=true}},searchLandUnbind:function(){var f=this;if(f.searchliIdList&&f.searchliIdList.length>0){for(var e=0,c=f.searchliIdList.length;e<c;e++){$("#"+f.searchliIdList[e]).off("click")}}},searchLandBind:function(c){var g=this;if(g.searchliIdList.length>0){var f=c;for(var e=0;e<g.searchliIdList.length;e++){$("#"+g.searchliIdList[e]).on("click",function(){var h=$(this).attr("searchland_index");var i=g.tipArray[h];g.searchLandSubmit(i,(f?"MSearch_HistoryRecords":"MSearch_SearchDropDownAssociationalWords"))})}}},searchLandSubmit:function(c,e){var g=this;var f=null;var h=null;if(M.object.isObject(c)){h=c;f=JSON.parse(h.value)}else{h={};f={};if(g.keywordIsObj&&c==g.keyword.showWord){h.text=g.keyword.showWord;f.keyword=g.keyword.realWord;h.value=JSON.stringify(f);h.text=c}else{f.keyword=c;h.value=JSON.stringify(f);h.text=c}}g.sendMping(e,f.keyword);$("#"+g.keywordId).val(f.keyword);f.catelogyList&&$("#"+g.catelogyListId).val(JSON.stringify(f.catelogyList));g.searchLandAddHistory(h);if(h.otherAttr&&h.otherAttr.isSearchShop){$("#"+g.formId).attr("action","/shop/searchShop.action")}else{$("#"+g.formId).attr("action","/ware/search.action")}$("#"+g.formId).submit();g.searchLoop=false},searchLandAddHistory:function(l){var j=this;var g=M.localstorage.get(j.searchHistoryLocalStorageName);try{g=JSON.parse(g)}catch(k){g=null;M.localstorage.remove(j.searchHistoryLocalStorageName)}if(!M.object.isArray(g)){g=null;M.localstorage.remove(j.searchHistoryLocalStorageName)}l.text=j.makeSearchName(l.text);delete l.tipNumber;if(g&&g.length>0){var h=0;var c=[l];for(var f=0;f<g.length;f++){if(h==14){break}if(g[f].text!=l.text){c.push(g[f])}h++}g=c}else{g=[];g.push(l)}M.localstorage.set(j.searchHistoryLocalStorageName,JSON.stringify(g))},makeSearchName:function(c){if(c.length>=30){c=c.substring(0,30)}return c},clearHistory:function(){var c=this;M.localstorage.remove(c.searchHistoryLocalStorageName)},searchTransformation:function(){var g=this;if(!g.openSearchLoad){$("body").removeClass("hide-landing");$("body").addClass("show-landing");$("body").addClass("history-color");var c=$("body").children("div");for(var e=0;e<c.length;e++){if($(c[e]).attr("id")!="search_land_searchland"&&!$(c[e]).attr("search_land_searchTransformation_show")){$(c[e]).css("display","none")}}$("body").children("footer").css("display","none");if(g.showFuncObj&&g.showFuncObj.func){var f=g.showFuncObj.source?g.showFuncObj.source:null;g.showFuncObj.func.call(f)}$("#"+g.searchPanelId).removeClass("on-blur");$("#"+g.searchPanelId).addClass("on-focus");window.scrollTo(0,1);g.openSearchLoad=true;g.searchLoop=true}else{$("body").removeClass("show-landing");$("body").removeClass("history-color");$("body").addClass("hide-landing");var c=$("body").children("div");for(var e=0;e<c.length;e++){if($(c[e]).attr("id")!="search_land_searchland"&&!$(c[e]).attr("search_land_searchTransformation_show")){$(c[e]).css("display","block")}}$("body").children("footer").css("display","block");if(g.hideFuncObj&&g.hideFuncObj.func){var f=g.hideFuncObj.source?g.hideFuncObj.source:null;g.hideFuncObj.func.call(f)}g.openSearchLoad=false;g.searchLoop=false;g.searchLocalStorage=false;g.oldkeyword="";$("#"+g.controlId).html("");$("#"+g.searchPanelId).removeClass("on-focus");$("#"+g.searchPanelId).addClass("on-blur");$("#"+g.hotKeyWordId).show();$("#"+g.hotKeyWordheadId).show()}},searchLandHotKeywordRecursiveFade:function(c,h,e,g){var j=this;if(e<g){for(var f=e;f<g;f++){if(f<=2){$(c[f]).addClass("tab-item-1")}else{$(c[f]).addClass("tab-item-2")}}setTimeout(function(){for(var k=e;k<g;k++){if(k<=2){$(c[k]).find("span").text(h[k])}}},310);setTimeout(function(){for(var k=e;k<g;k++){if(k<=2){$(c[k]).removeClass("tab-item-1")}}},500);setTimeout(function(){for(var k=e;k<g;k++){if(k>2){$(c[k]).find("span").text(h[k])}}},410);setTimeout(function(){for(var k=e;k<g;k++){if(k>2){$(c[k]).find("span").text(h[k]);$(c[k]).removeClass("tab-item-2")}}},750)}},mainHtml:function(){var f=this;var e=[];e.push('<div id="search_land_searchland" class="search-lading-area">');if(f.hotKeyword&&f.hotKeyword.length>0){e.push('<div style="transform-origin: 0px 0px 0px; opacity: 1; transform: scale(1, 1);" class="hot-search-new-bar" id="'+f.hotKeyWordheadId+'">');e.push("<strong>热搜</strong>");e.push('<span class="search_replace" id="'+f.changeHotKeyWordId+'"></span>');e.push('<div style="transform-origin: 0px 0px 0px; opacity: 1; transform: scale(1, 1);" class="search-landing-tags" id="'+f.hotKeyWordId+'">');for(var c=0;c<6&&c<f.hotKeyword.length;c++){f.hotKeywordIndex=c;var g="hotKeyWordBtn_"+c;f.hotKeyWordBtnIds.push(g);e.push('<a href="javascript:void(0);" id="'+g+'"><span>'+f.hotKeyword[c]+"</span></a>")}e.push("</div>");e.push("</div>")}e.push('<ul id="'+f.controlId+'" class="search-landing-keywords">');e.push("</ul>");e.push('<div style="display: block;" class="search-landing-clear"><span id="'+f.clearHistoryId+'">清空历史搜索</span></div>');e.push("</div>");return e.join("")},sendMping:function(g,c){try{var h=new MPing.inputs.Click(g);h.event_param=c?c:"";var f=new MPing();f.send(h)}catch(i){}},render:function(){var e=this;if(M.object.isObject(e.renderId)||M.object.isArray(e.renderId)){$(e.renderId).append(e.mainHtml())}else{$("#"+e.renderId).append(e.mainHtml())}$("body").addClass((e.isHome?"mhome":"mlist"));$("body").addClass("hide-landing");$("#"+e.keywordId).on("click",function(h){var f=null;if(e.isHome){if(e.openSearchLoad){f="MSearch_Search"}else{f="MHome_Search"}}else{f="MProductList_Search"}e.sendMping(f);if(!e.openSearchLoad){if(e.landSearchWordHide){$("#"+e.keywordId).val("")}else{var i=e.keyword;if(e.keywordIsObj){i=e.keyword.showWord?e.keyword.showWord:"";if(e.keyword.keyword){if(e.keyword.keyword!=e.keyword.realWord){var g=M.string.decodeHtml(e.keyword.keyword);$("#"+e.keywordId).val(g)}else{$("#"+e.keywordId).val("")}}$("#"+e.keywordId).attr("placeholder",i)}else{$("#"+e.keywordId).val(i)}}e.searchTransformation()}});$("#"+e.keywordId).on("keydown",function(g){if(g.keyCode=="13"){var f=$.trim($("#"+e.keywordId).val());var h=$.trim($("#"+e.keywordId).attr("placeholder"));if(f==""&&h!=""){f=h}if(f!=""){e.searchLandSubmit(f,"MSearch_Searchthi")}}return});$("#"+e.closeSearchLandBtnId).on("click",function(){if(e.openSearchLoad){e.searchTransformation();var g=e.keyword;if(e.keywordIsObj){g=e.keyword.showWord?e.keyword.showWord:"";if(e.keyword.keyword){if(e.keyword.keyword!=e.keyword.realWord){var f=M.string.decodeHtml(e.keyword.keyword);$("#"+e.keywordId).val(f)}else{$("#"+e.keywordId).val("")}}else{$("#"+e.keywordId).val("")}$("#"+e.keywordId).attr("placeholder",g)}else{$("#"+e.keywordId).val(g)}$("#"+e.keywordId).addClass("hilight1")}});$("#"+e.clearHistoryId).on("click",function(){if(confirm("确定要清空吗?")){e.sendMping("MSearch_ClearHistory");e.clearHistory();$("#"+e.controlId).html("");$("#"+e.clearHistoryId).parent().css({display:"none;"})}});$("#"+e.submitId).on("click",function(){var g=$.trim($("#"+e.keywordId).val());var h=$.trim($("#"+e.keywordId).attr("placeholder"));if(g==""&&h!=""){g=h}if(g!=""){var f=null;if(e.isHome){if(e.openSearchLoad){f="MSearch_SearchButton"}else{f="MHome_SearchButton"}}else{f="MSearch_SearchButton"}e.searchLandSubmit(g,f)}});$("#"+e.claerKeywordBtnId).on("click",function(){$("#"+e.keywordId).val("");$(this).css({display:"none;"})});$("#"+e.keywordId).on("keyup",function(){if($(this).val()!=e.keyword){$(this).removeClass("hilight1");$(this).addClass("hilight2")}else{$(this).removeClass("hilight2");$(this).addClass("hilight1")}});if(e.hotKeyWordBtnIds.length>0){for(var c=0;c<e.hotKeyWordBtnIds.length;c++){$("#"+e.hotKeyWordBtnIds[c]).on("click",function(){var f=$.trim($(this).find("span").text());if(f!=""){e.searchLandSubmit(f,"MSearch_HotWords")}})}}if(e.hotKeyword&&e.hotKeyword.length>0){$("#"+e.changeHotKeyWordId).on("click",function(){var g=0;var k=[];for(var h=e.hotKeywordIndex+1,f=h+6;h<f&&h<e.hotKeyword.length;h++){g++;e.hotKeywordIndex=h;k.push(e.hotKeyword[h])}if(g<6){for(var h=0,f=6-g;h<f&&h<e.hotKeyword.length;h++){g++;e.hotKeywordIndex=h;k.push(e.hotKeyword[h])}}var l=$("#"+e.hotKeyWordId).find("a");$("#"+e.changeHotKeyWordId).addClass("rotate");setTimeout(function(){$("#"+e.changeHotKeyWordId).removeClass("rotate")},500);e.sendMping("MSearch_ChangeKeyWords");e.searchLandHotKeywordRecursiveFade(l,k,0,g)})}e.searchLoadControl()}});a.clazz=b});var slide=(function(){var a=function(c){return new b(c)};function b(c){this.elem=c;this.oBox=document.querySelector(c);this.aLi=document.querySelectorAll(c+" [data-ul-child=child]");this.oUl=document.querySelector(c+" [data-slide-ul=firstUl]");this.now=0;this.on0ff=false}b.prototype={init:function(c){var c=c||{},f=this.aLi;this.defaults={startIndex:0,loop:false,smallBtn:false,number:false,laseMoveFn:false,location:false,preDef:"lnr",autoPlay:false,autoHeight:false,preFn:null,playTime:6000};b.extend(this.defaults,c);this.now=this.defaults.startIndex;if(this.defaults.smallBtn){this.btns=document.querySelectorAll(this.elem+' [data-ol-btn="btn"]');for(var e=0;e<this.btns.length;e++){this.btns[e].className=""}this.btns[b.getNow(this.now,f.length)].className="active"}if(this.defaults.number){this.slideNub=document.getElementById("slide-nub");this.slideSum=document.getElementById("slide-sum");this.slideNub.innerHTML=this.now+1;this.slideSum.innerHTML=this.aLi.length}if(this.aLi.length<=2){if(this.defaults.loop){this.oUl.innerHTML+=this.oUl.innerHTML}this.aLi=document.querySelectorAll(this.elem+" [data-ul-child=child]");this.need=true}if(this.defaults.autoPlay){this.pause();this.play()}this.liInit();this.bind()},bind:function(){var g=this.oBox,f=b._device();if(!f.hasTouch){g.style.cursor="pointer";g.ondragstart=function(h){if(h){return false}return true}}var e="onorientationchange" in window;var c=e?"orientationchange":"resize";g.addEventListener(f.startEvt,this);window.addEventListener(c,this);window.addEventListener("touchcancel",this);if(navigator.userAgent.indexOf("baidubrowser")){window.addEventListener("focusin",this);window.addEventListener("focusout",this)}else{window.addEventListener("blur",this);window.addEventListener("focus",this)}},liInit:function(){var e=this.aLi,g=e.length,n=this.oUl,m=this.oBox.offsetWidth,f=this.now,l=this;if(this.defaults.preFn){this.defaults.preFn()}n.style.width=m*g+"px";for(var j=0;j<g;j++){b.setStyle(e[j],{WebkitTransition:"all 0ms ease",transition:"all 0ms ease",height:"auto"})}if(this.defaults.autoHeight){var c=this.oBox.offsetWidth;if(c>=640){c=640}else{if(c<=320){c=320}}for(var j=0;j<g;j++){e[j].style.width=c+"px"}var k=e[0].getElementsByTagName("img")[0];if(k){var h=new Image();h.onload=function(){l.oBox.style.height=e[0].offsetHeight+"px";for(var o=0;o<e.length;o++){e[o].style.height=e[0].offsetHeight+"px"}};h.src=k.src}else{this.oBox.style.height=e[0].offsetHeight+"px"}}if(this.defaults.loop){for(var j=0;j<g;j++){b.setStyle(e[j],{position:"absolute",left:0,top:0});if(j==b.getNow(f,g)){b.setStyle(e[j],{WebkitTransform:"translateX("+0+"px)",transform:"translateX("+0+"px)",zIndex:10})}else{if(j==b.getPre(f,g)){b.setStyle(e[j],{WebkitTransform:"translateX("+-m+"px)",transform:"translateX("+-m+"px)",zIndex:10})}else{if(j==b.getNext(f,g)){b.setStyle(e[j],{WebkitTransform:"translateX("+m+"px)",transform:"translateX("+m+"px)",zIndex:10})}else{b.setStyle(e[j],{WebkitTransform:"translateX("+0+"px)",transform:"translateX("+0+"px)",zIndex:9})}}}}}else{console.log("bbb");for(var j=0;j<g;j++){b.setStyle(e[j],{WebkitTransform:"translateX("+f*-m+"px)",transform:"translateX("+f*-m+"px)"})}}},handleEvent:function(e){var c=b._device(),f=this.oBox;switch(e.type){case c.startEvt:if(this.defaults.autoPlay){this.pause()}this.startHandler(e);break;case c.moveEvt:if(this.defaults.autoPlay){this.pause()}this.moveHandler(e);break;case c.endEvt:if(this.defaults.autoPlay){this.pause();this.play()}this.endHandler(e);break;case"touchcancel":if(this.defaults.autoPlay){this.pause();this.play()}this.endHandler(e);break;case"orientationchange":this.orientationchangeHandler();break;case"resize":this.orientationchangeHandler();break;case"focus":if(this.defaults.autoPlay){this.pause();this.play()}break;case"blur":if(this.defaults.autoPlay){this.pause()}break;case"focusin":if(this.defaults.autoPlay){this.pause();this.play()}break;case"focusout":if(this.defaults.autoPlay){this.pause()}break}},startHandler:function(f){this.on0ff=true;var e=b._device(),g=e.hasTouch,i=this.oBox,c=this.now,h=this.aLi;i.addEventListener(e.moveEvt,this);i.addEventListener(e.endEvt,this);this.downTime=Date.now();this.downX=g?f.targetTouches[0].pageX:f.clientX-i.offsetLeft;this.downY=g?f.targetTouches[0].pageY:f.clientY-i.offsetTop;this.startT=b.getTranX(h[b.getNow(c,h.length)]);this.startNowT=b.getTranX(h[b.getNow(c,h.length)]);this.startPreT=b.getTranX(h[b.getPre(c,h.length)]);this.startNextT=b.getTranX(h[b.getNext(c,h.length)])},moveHandler:function(p){var m=this.oBox,f=b._device();if(this.on0ff){var n=f.hasTouch;var j=n?p.targetTouches[0].pageX:p.clientX-m.offsetLeft;var h=n?p.targetTouches[0].pageY:p.clientY-m.offsetTop;var c=this.aLi,g=c.length,e=this.now,r=c[0].offsetWidth;if(this.defaults.preDef=="all"){b.stopDefault(p)}for(var l=0;l<g;l++){b.setStyle(c[l],{WebkitTransition:"all 0ms ease",transition:"all 0ms ease"})}if(Math.abs(j-this.downX)<Math.abs(h-this.downY)){if(this.defaults.preDef=="tnd"&&this.defaults.preDef!="all"){b.stopDefault(p)}}else{if(Math.abs(j-this.downX)>10){if(this.defaults.preDef=="lnr"&&this.defaults.preDef!="all"){b.stopDefault(p)}if(this.defaults.loop){k=(this.startNowT+j-this.downX).toFixed(4);preT=(this.startPreT+j-this.downX).toFixed(4);nextT=(this.startNextT+j-this.downX).toFixed(4);b.move(c[b.getNow(e,g)],k,10);b.move(c[b.getPre(e,g)],preT,10);b.move(c[b.getNext(e,g)],nextT,10)}else{var k=b.getTranX(c[e]);if(k>0){var o=((this.startT+j-this.downX)/3).toFixed(4);for(var l=0;l<g;l++){b.move(c[l],o)}}else{if(Math.abs(k)>=Math.abs((g-1)*r)){var o=(this.startT+(j-this.downX)/3).toFixed(4);for(var l=0;l<g;l++){b.move(c[l],o)}if(this.defaults.laseMoveFn&&typeof this.defaults.laseMoveFn=="function"){var q=(o-this.startT).toFixed(4);this.defaults.laseMoveFn(q)}}else{var o=(this.startT+j-this.downX).toFixed(4);for(var l=0;l<g;l++){b.move(c[l],o)}}}}}}}else{m.removeEventListener(f.moveEvt,this);m.removeEventListener(f.endEvt,this)}},endHandler:function(j){this.on0ff=false;var g=Date.now(),f=b._device(),i=f.hasTouch,h=this.oBox,m=i?j.changedTouches[0].pageX:j.clientX-h.offsetLeft,l=i?j.changedTouches[0].pageY:j.clientY-h.offsetTop,c=this.aLi,k=c[0].offsetWidth,e=b.getTranX(c[b.getNow(this.now,c.length)]);if(m-this.downX<30&&m-this.downX>=0&&Math.abs(l-this.downY)<30){this.tab(e,"+=");return"click"}else{if(m-this.downX>-30&&m-this.downX<=0&&Math.abs(l-this.downY)<30){this.tab(e,"-=");return"click"}else{if(Math.abs(l-this.downY)-Math.abs(m-this.downX)>30&&m-this.downX<0){this.tab(e,"-=");return}if(Math.abs(l-this.downY)-Math.abs(m-this.downX)>30&&m-this.downX>0){this.tab(e,"+=");return}if(m<this.downX){if(this.downX-m>k/3||g-this.downTime<200){this.now++;this.tab(e,"++");return"left"}else{this.tab(e,"+=");return"stay"}}else{if(m-this.downX>k/3||g-this.downTime<200){this.now--;this.tab(e,"--");return"right"}else{this.tab(e,"-=");return"stay"}}}}h.removeEventListener(f.moveEvt,this);h.removeEventListener(f.endEvt,this)},tab:function(f,m,g){var c=this.aLi,l=c.length,s=c[0].offsetWidth,r=this.oBox,h=b._device(),q=this,e=this.now;if(this.defaults.loop){if(e<0){e=l-1;this.now=l-1}for(var p=0;p<l;p++){if(p==b.getPre(e,l)){var k;switch(m){case"++":k=300;break;case"--":k=0;break;case"+=":k=0;break;case"-=":k=300;break;default:break}b.setStyle(c[b.getPre(e,l)],{WebkitTransform:"translateX("+-s+"px)",transform:"translateX("+-s+"px)",zIndex:10,WebkitTransition:"all "+k+"ms ease",transition:"all "+k+"ms ease"})}else{if(p==b.getNow(e,l)){b.setStyle(c[b.getNow(e,l)],{WebkitTransform:"translateX("+0+"px)",transform:"translateX("+0+"px)",zIndex:10,WebkitTransition:"all "+300+"ms ease",transition:"all "+300+"ms ease"})}else{if(p==b.getNext(e,l)){var k;switch(m){case"++":k=0;break;case"--":k=300;break;case"+=":k=300;break;case"-=":k=0;break;default:break}b.setStyle(c[b.getNext(e,l)],{WebkitTransform:"translateX("+s+"px)",transform:"translateX("+s+"px)",zIndex:10,WebkitTransition:"all "+k+"ms ease",transition:"all "+k+"ms ease"})}else{b.setStyle(c[p],{WebkitTransform:"translateX("+0+"px)",transform:"translateX("+0+"px)",zIndex:9,WebkitTransition:"all "+0+"ms ease",transition:"all "+0+"ms ease"})}}}}}else{for(var p=0;p<l;p++){b.setStyle(c[p],{WebkitTransition:"all "+300+"ms ease",transition:"all "+300+"ms ease"})}if(e<=0){e=0;this.now=0}if(e>l-1){if(g){e=0;this.now=0}else{e=l-1;this.now=l-1}}for(var o=0;o<l;o++){b.setStyle(c[o],{WebkitTransform:"translateX("+(-e*s)+"px)",transform:"translateX("+(-e*s)+"px)"})}}if(this.defaults.smallBtn){for(var p=0;p<this.btns.length;p++){this.btns[p].className=""}if(this.need){this.btns[b.getNow(e,l/2)].className="active"}else{this.btns[b.getNow(e,l)].className="active"}}if(this.defaults.number){this.slideNub.innerHTML=b.getNow(e,l)+1}c[b.getNow(e,l)].addEventListener("webkitTransitionEnd",n,false);c[b.getNow(e,l)].addEventListener("transitionend",n,false);function n(){if(q.defaults.location){if(f<-(l-1)*s-s/5){window.location.href=q.defaults.location}}c[b.getNow(q.now,l)].removeEventListener("webkitTransitionEnd",n,false);c[b.getNow(q.now,l)].removeEventListener("transitionend",n,false)}},play:function(){var c=this;c.timer=setInterval(function(){c.now++;c.tab(null,"++",true)},this.defaults.playTime)},pause:function(){var c=this;clearInterval(c.timer)},orientationchangeHandler:function(){var c=this;setTimeout(function(){c.liInit()},300)}};b.extend=function(e,c){for(name in c){if(c[name]!==undefined){e[name]=c[name]}}};b.extend(b,{setStyle:function(e,c){for(name in c){e.style[name]=c[name]}},getTranX:function(f){var e=f.style.WebkitTransform||f.style.transform;var g=e.indexOf("translateX(");var c=parseInt(e.substring(g+11,e.length-3));return c},_device:function(){var g=!!("ontouchstart" in window||window.DocumentTouch&&document instanceof window.DocumentTouch);var e=g?"touchstart":"mousedown";var f=g?"touchmove":"mousemove";var c=g?"touchend":"mouseout";return{hasTouch:g,startEvt:e,moveEvt:f,endEvt:c}},getNow:function(e,c){return e%c},getPre:function(f,c){if(f%c-1<0){var e=c-1}else{var e=f%c-1}return e},getNext:function(f,e){if(f%e+1>e-1){var c=0}else{var c=f%e+1}return c},move:function(f,c,e){var g=e||null;if(g){f.style.zIndex=g}b.setStyle(f,{WebkitTransform:"translateX("+c+"px)",transform:"translateX("+c+"px)"})},stopDefault:function(c){if(c&&c.preventDefault){c.preventDefault()}else{window.event.returnValue=false}return false}});return a})();M.define("thread",function(a){var b=function(c){this.init(c)};M.object.merge(b.prototype,{init:function(e){this.eventState=this.eventState||{};this.eventList=[];this.closeList=[];this.openList=[];this.time=1000;if(M.object.isObject(e)){if(e.time&&M.object.isNumber(e.time)){this.time=e.time}this.isStart=false;if(e.eventList&&M.object.isArray(e.eventList)){this.eventList=e.eventList}if(this.eventList.length>0){for(var c=0;c<this.eventList.length;c++){if(this.eventList[c].name){this.eventState[this.eventList[c].name]=true}else{throw new Error("one eventName is null")}}}}},call:function(){var e=this;if(e.eventList.length>0){for(var c=0;c<e.eventList.length;c++){if(e.eventList[c]&&e.eventList[c].event){if(e.eventState[e.eventList[c].name]){e.runFunction(e.eventList[c]);e.runObject(e.eventList[c])}}}for(var c=0;c<e.closeList.length;c++){e.eventState[e.closeList[c]]=false}for(var c=0;c<e.openList.length;c++){e.eventState[e.openList[c]]=true}e.openList=[];e.closeList=[]}if(!e.stopThread){e.threadId=setTimeout(function(){e.isStart=true;e.call()},e.time)}},runFunction:function(f){var e=this;if(M.object.isFunction(f.event)){var c=null;if(f.source){c=f.source}if(f.name){e.eventState[f.name]=true}f.event.call(c,e.time)}},runObject:function(f){var e=this;if(M.object.isObject(f.event)){var c=null;if(f.source){c=f.source}if(M.object.isObject(f.event)&&M.object.isFunction(f.event.go)){f.event.go.call(c,e.time)}}},start:function(){var c=this;if(!c.isStart){c.threadId=setTimeout(function(){c.isStart=true;c.call()},c.time)}},openOne:function(c,f){var g=this;if(!M.object.isDefined(g.eventState[c])&&!g.eventState[c]){if(!f){g.eventState[c]=true}else{if(g.getOpenListIndex(c)==-1){g.openList.push(c);var e=g.getOpenListIndex(c);if(e>0){g.openList.splice(e,1)}}}}},closeOne:function(c,f){var g=this;if(!M.object.isDefined(g.eventState[c])&&g.eventState[c]){if(!f){g.eventState[c]=false}else{if(g.getCloseListIndex(c)!=-1){g.closeList.push(c);var e=g.getCloseListIndex(c);if(e>0){g.closeList.splice(e,1)}}}}},addOne:function(e,c){var f=this;if(M.object.isObject(e)){if(M.object.isObject(e)&&e.name){if(!c){f.eventState[e.name]=true}else{f.eventState[e.name]=false;f.openList.push(e.name)}f.eventList.push(e)}}},getCloseListIndex:function(e){var g=this;var c=-1;for(var f=0;f<g.closeList.length;f++){if(g.closeList[f]==e){c=f;break}}return c},getOpenListIndex:function(e){var g=this;var c=-1;for(var f=0;f<g.openList.length;f++){if(g.openList[f]==e){c=f;break}}return c},stop:function(){var c=this;if(!c.isStart){clearTimeout(c.threadId);c.stopThread=true}}});a.clazz=b});